PIO EQU 30H

ORG 1000H
CADENA DB "Hola Gente COMO va Yo ando ACa"
fin db ?

SELECCIONADO: MOV DL, 0
CMP BYTE PTR [BX], 41H
JS FINAL
CMP BYTE PTR [BX], 5BH
JNS FINAL
MOV DL,1
FINAL: RET


ORG 2000H
MOV BX, OFFSET CADENA
MOV CL, OFFSET FIN - OFFSET CADENA
MOV AL, 0FDH
OUT PIO+2, AL
MOV AL, 0
OUT PIO+3, AL
IN AL, PIO
AND AL, 0FDH
OUT PIO, AL
CONSULT: IN AL, PIO
AND AL, 1
JNZ CONSULT
CALL SELECCIONADO 
CMP DL, 1
JNZ NOIMP
MOV AL, [BX]
OUT PIO+1, AL
IN AL, PIO
OR AL, 02H
OUT PIO, AL
IN AL, PIO
AND AL, 0FDH
OUT PIO, AL
NOIMP: INC BX
DEC CL
JNZ CONSULT
INT 0
END